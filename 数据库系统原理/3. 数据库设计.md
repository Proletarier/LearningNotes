# 数据库设计概述

## 数据库的生命周期
   数据库的生命周期可分为两个阶段，分别是数据 库分析与设计阶段、数据库实现与操作阶段。
   其中，数据库分析与设计阶段包括需求分析、 概念设计、逻辑设计和物理设计四个环节；数据库实现与操作阶段包含数据库的实现、操作 与监督、修改与调整三个子阶段。
## 数据库设计的目标
   数据库设计具有两个十分重要的目标，即满足应用功能需求和良好的数据库性 能。其中，满足应用功能需求，主要是指用户当前与可预知的将来应用所需要的数据及其联 系，应全部准确地存储在数据库之中，从而可满足用户应用中所需要的对数据进行的存、 取、删、改等操作；
   良好的数据库性能，主要是指对数据的高效率存取和空间的节省，并具 有良好的数据共享性、完整性、一致性及安全保密性
## 数据库设计的内容
   * 数据库结构设计: 是针对给定的应用环境进行数据库的模式或子模式的设计，包括数据库 的概念结构设计、逻辑结构设计和物理结构设计。模式定义并给岀各应用程序共享的结构， 是静态的，一经形成通常不会改变。
   * 数据库行为设计: 数据库行为设计是确定数据库用户的行为和动作，而用户的行为和动作是对数据库的操 作，它们通常是通过应用程序来实现的。由于用户的行为会使数据库的内容发生变化，所以 行为设计是动态的。
## 数据库设计的方法
1. 直观设计法
    直观设计法是一类最原始的数据库设计方法，它利用设计者的经验和技巧来设计数据库 模式。由于缺乏科学理论的指导，设计的质量很难保证，因此这种方法已不适应如今信息系 统的开发。
2. 规范设计法
   1. 新奥尔良(New Orleans)设计方法
   2. 基于E-R模型的数据库设计方法
   3. 基于第三范式的设计方法
   4. 计算机辅助设计法
## 数据库设计的过程
按照规范设计的方法，同时考虑数据库及其应用系统开发的全过程，可以将数据库设计 分为这样几个阶段：需求分析阶段；结构设计阶段，其包括概念结构设计、逻辑结构设计和 物理结构设计；行为设计阶段，其包括功能设计、事务设计和程序设计；数据库实施阶段， 其包括加载数据库数据和调试运行应用程序；数据库运行和维护阶段。

# 数据库设计的基本步骤
即需求分概念结构设计、逻辑结构设计、物理结构设计、数据库 实施、数据库的运行和维护，这些是数据库设计中最重要的任务
## 需求分析
1. 确定数据库范围
2. 应用过程分析
3. 收集与分析数据
4. 编写需求分析报告
## 概念结构设计
概念结构设计的常用方法有实体分析法和属性综合法两种，它们也分别称为自顶向下法 和自底向上法。其中，自底向上法釆用从属性分析开始，高层实体及联系通过底层属性组成 的设计技术。
## 	逻辑结构设计
逻辑结构设计的目标是将概念模型转换为等价的、并为特定DBMS所支持数据模型的 结构。数据库逻辑模型一般由层次、网状、关系数据模型表示。
## 	物理设计
物理设计是指对于一个给定的数据库逻辑结构，研究并构造物理结构的过程，其具体任 务主要是确定数据库在存储设备上的存储结构及存取方法，因DBMS的不同还可能包括建 立索引和聚集，以及物理块大小、缓冲区个数和大小、数据压缩的选择等。
## 	数据库实施
完成数据库的逻辑与物理结构设计之后，就可以在实际的计算机系统中建立数据库并试 运行了。数据库实施阶段需要完成的工作包括：加载数据、应用程序设计和数据库试运行。
## 数据库运行和维护
 只有经过试运行之后，确认系统无故障或暂未发现故障时，系统才能投入到生产实际中 运行。数据库系统投入实际运行标志着数据库设计和应用开发的基本完成，但绝不意味着设 计和应用开发工作的终止。随着应用的深入和拓展，有可能暴露原未发现的问题；也有可能 因对数据的不断增、删、改而使得系统的物理存储结构变坏或存取效率下降；另外，应用需 求也有可能发生改变或扩展。所有这些，都需要工作人员在系统运行中做好维护工作，监 督、发现和分析问题，提出改进或扩展方案并付诸实施。此外，还应定期或不定期地进行数 据转储，当系统出现故障时进行恢复处理，并实施安全与完整性控制。
# 关系数据库设计方法
关系数据库是一类采用关系模型作为逻辑数据模型的数据库系统，它的设计过程遵从数 据库设计的基本步骤，即同样包含需求分析、概念结构设计、逻辑结构设计、物理结构设 计、数据库实施、数据库的运行和维护等这样一些阶段，其中关系数据库的概念结构设计与 逻辑结构设计是关系数据库整个设计过程的关键。本节则主要介绍关系数据库的概念结构设 计、逻辑结构设计、物理设计中的相关方法。
## 关系数据库设计过程与各级模式
在逻辑结构设计阶段，将E-R图转换成具体的数据库产品支持的关系数据模型，形成数据库逻辑模式，然后根据用户处理的要求、安 全性的考虑，在基本表的基础上再建立必要的视图，形成数据的外模式；在物理结构的设计 阶段，根据关系数据库管理系统的特点和处理的需要，进行物理存储安扫E，建立索引，形成 数据库内模式。
## 概念结构设计方法
### E-R图的表示方法
1. 实体型，其用矩形表示，矩形框内写明实体的名称。
2. 属性，其用椭圆形表示，并用无向边将其与相应的实体连接起来。
3. 联系，其用菱形表示，菱形框内写明联系的名称，并用无向边分别与有关实体连接 起来，同时在无向边旁标上联系的类型（1:1、1:N或M:N）,如果一个联系具有属性，则这 些属性也要用无向边与该联系连接起来广'
### 局部信息结构设计
1. 确定局部范围
2. 选择实体
3. 选择实体的关键字属性
4. 确定实体间联系
5. 确定实体的属性
### 全局信息结构设计
全局信息结构设计是将上述步骤中产生的所有局部信息结构合并成为一个全局信息结 构。全局信息结构必须是所有局部信息结构的全面准确的映像，即合并前各局部信息结构所 能实现的应用需求，合并形成的全局信息结构仍能实现。
同时，全局信息结构中应努力避免 或消除不同局部信息结构中因用户观点的不同所可能导致的数据不一致，并尽可能地增强数 据的共享性，控制数据的冗余
*  属性冲突
1. 属性域冲突，即属性值的类型、取值范围、取值集合的不同。
2. 属性取值单位冲突。例如，人的身高有的是以米为度量单位，有的则是以厘米为表 示单位。
* 命名冲突
1. 同名异义,即不同意义的实体类型名或联系类型名在不同的局部应用中具有相同的名字。
2. 异名同义，即同一意义的实体类型名或联系类型名在不同的局部应用中具有不同的 名字。
* 结构冲突
1. 同一对象在一个局部E-R图中作为实体，而在另一个局部E-R图中作为属性。
2. 同一实体在不同的E-R图中属性个数和类型不同。
3. 实体之间的联系在不同的E-R图中是不同的类型。
## 逻辑结构设计方法
### E-R图向关系模型的转换
E-R图向关系模型的转换要解决的问题，是如何将实体以及实体间的联系转换为关系模 式，如何确定这些关系模式的属性和主码。关系模型的逻辑结构是一组关系模式的集合，而 E-R图则是由实体、实体的属性和实体间的联系三个要素所组成的，因出:将E-R图转换为关 系模型实际上就是要将实体、实体的属性和实体间的联系转换为某种关系模式
1. 一个实体型转换为一个关系模式。实体的属性作为关系的属性，实体的码作为关系的码。
2. 一个一对一（1:1）联系可以转换为一个独立的关系模式，也可以与任意一端对应的关系模式合并。如果转换为一个独立的关系模式，则与该联系相连的各实体的码以及联 系本身的属性均转换为关系的属性，每个实体的码均是该关系的候选码；如果与某一端实 体对应的关系模式合并，则需要在该关系模式的属性中加入另一个关系模式的码和联系本 身的属性。
3.一个一对多（1:N）联系可以转换为一个独立的关系模式，也可以与N端对应的关 系模式合并。如果转换为一个独立的关系模式，则与该联系相连的各实体的码以及联系本身 的属性均转换为关系的属性，而关系的码为N端实体的码。
4.一个多对多（M:N）联系转换为一个关系模式。与该联系相连的各实体的码以及联 系本身的属性均转换为关系的属性，而关系的码为各实体码的组合
### 数据模型的优化
1. 确定各属性间的函数依赖关系。
2. 对于各个关系模式之间的数据依赖进行极小化处理，消除冗余的联系。
3. 判断每个关系模式的范式，根据实际需要确定最合适的范式。
4. 按照需求分析阶段得到的处理要求，分析这些模式对于这样的应用环境是否合适， 确定是否要对某些模式进行合并或分解。
5. 对关系模式进行必要的分解，提高数据操作的效率和存储空间的利用率。
### 设计用户子模式
将概念模型转换为全局逻辑模型之后，可根据局部应用需求，利用视图（View）设计更 符合局部用户需要的用户外模式。

## 物理设计方法
1.建立索引
2.建立聚集







